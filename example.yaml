log_level: "info"  # debug, info, warn, error

mysensors:
  transport: "ethernet"  # ethernet, rs485
  ethernet:
    host: "172.30.15.1"
    port: 5003
  rs485:
    device: "/dev/ttyUSB0"

mqtt:
  broker: "172.24.0.243"
  port: 1883
  username: "nippy"
  password: "nippy"
  client_id: "ms-mqtt-adapter"

tcp_service:
  enabled: true
  port: 5003

sync:
  enabled: true
  period: "30s"

gateway:
  node_id_range:
    start: 1
    end: 254
  version_request_period: "5s"  # How often to send version requests to gateway

adapter:
  topic_prefix: "ms-mqtt-adapter"
  homeassistant_discovery: true  # Enable/disable HomeAssistant auto-discovery
  optimistic_mode: false
  request_ack: true  # Request ACK bit to encourage device echoing (default: true)

devices:
  - name: "Relay 3 #1"
    id: "relay_3_1"
    node_id: 1
    manufacturer: "Nippy"
    model: "Nippy"
    sw_version: "1.0"
    hw_version: "1.0"
    relays:
      - name: "Relay 1"
        id: "relay_1"
        child_id: 0
        initial_state: 0  # 0=OFF, 1=ON
        icon: "hue:socket-eu"
        device_class: "switch"
      - name: "Relay 2"
        id: "relay_2"
        child_id: 1
        initial_state: 0
        icon: "hue:socket-eu"
        device_class: "switch"
      - name: "Relay 3"
        id: "relay_3"
        child_id: 2
        initial_state: 0
        icon: "hue:socket-eu"
        device_class: "switch"

  - name: "Input 6 #1"
    id: "input_6_1"
    node_id: 2
    manufacturer: "Nippy"
    model: "Nippy"
    sw_version: "1.0"
    hw_version: "1.0"
    inputs:
      - name: "Input Button 1"
        id: "input_button_1"
        child_id: 0
        icon: "hue:friends-of-hue-senic"
      - name: "Input Button 2"
        id: "input_button_2"
        child_id: 1
        icon: "hue:friends-of-hue-senic"
      - name: "Input Button 3"
        id: "input_button_3"
        child_id: 2
        icon: "hue:friends-of-hue-senic"
      - name: "Input Button 4"
        id: "input_button_4"
        child_id: 3
        icon: "hue:friends-of-hue-senic"
      - name: "Input Button 5"
        id: "input_button_5"
        child_id: 4
        icon: "hue:friends-of-hue-senic"
      - name: "Input Button 6"
        id: "input_button_6"
        child_id: 5
        icon: "hue:friends-of-hue-senic"

  - name: "Relay 3 #2"
    id: "relay_3_2"
    node_id: 3
    manufacturer: "Nippy"
    model: "Nippy"
    sw_version: "1.0"
    hw_version: "1.0"
    relays:
      - name: "Relay 1"
        id: "relay_1"
        child_id: 0
        initial_state: 0
        icon: "hue:socket-eu"
        device_class: "switch"
      - name: "Relay 2"
        id: "relay_2"
        child_id: 1
        initial_state: 0
        icon: "hue:socket-eu"
        device_class: "switch"
      - name: "Relay 3"
        id: "relay_3"
        child_id: 2
        initial_state: 0
        icon: "hue:socket-eu"
        device_class: "switch"

  - name: "Relay 9 #2"
    id: "relay_9_2"
    node_id: 100
    manufacturer: "Nippy"
    model: "Nippy"
    sw_version: "1.0"
    hw_version: "1.0"
    relays:
      - name: "Relay 1"
        id: "relay_1"
        child_id: 0
        initial_state: 0
        icon: "hue:socket-eu"
        device_class: "switch"
        # Uses global optimistic_mode: false (waits for device confirmation)
      - name: "Relay 2 (Fast)"
        id: "relay_2"
        child_id: 1
        initial_state: 0
        icon: "hue:socket-eu"
        device_class: "switch"
        optimistic: true  # Override: immediate response for fast UI
      - name: "Relay 3 (Critical)"
        id: "relay_3"
        child_id: 2
        initial_state: 0
        icon: "hue:socket-eu"
        device_class: "switch"
        optimistic: false  # Explicit: must wait for device confirmation
      - name: "Relay 4"
        id: "relay_4"
        child_id: 3
        initial_state: 0
        icon: "hue:socket-eu"
        device_class: "switch"
      - name: "Relay 5"
        id: "relay_5"
        child_id: 4
        initial_state: 0
        icon: "hue:socket-eu"
        device_class: "switch"
      - name: "Relay 6"
        id: "relay_6"
        child_id: 5
        initial_state: 0
        icon: "hue:socket-eu"
        device_class: "switch"
      - name: "Relay 7"
        id: "relay_7"
        child_id: 6
        initial_state: 0
        icon: "hue:socket-eu"
        device_class: "switch"
      - name: "Relay 8"
        id: "relay_8"
        child_id: 7
        initial_state: 0
        icon: "hue:socket-eu"
        device_class: "switch"
      - name: "Relay 9"
        id: "relay_9"
        child_id: 8
        initial_state: 0
        icon: "hue:socket-eu"
        device_class: "switch"
